import{d as a,n as t,c as e,e as s,w as n,C as l,D as i,B as u,F as r,l as o,h as c,v as d,_ as v,a3 as m,q as p,b as f,o as x,J as g,A as k,t as _,E as y,f as h,a0 as w,m as b,R as j,a4 as C}from"./index.cc005d8f.js";import{u as I}from"./mixin.0bfe0b1d.js";import{P as T}from"./page.2a11d509.js";const A=a({name:"VirText"}),D=v(a({...A,props:{text:null,data:null},emits:["click"],setup(a,{emit:v}){const m=a,p=t((()=>function(a,t,e){for(const n of a.matchAll(/(.*?)\{(\w+?)\}/g))t.push({text:n[1],click:!1}),t.push({text:n[2],click:!0}),e+=n[1].length,e+=n[2].length,e+=2;const s=a.substring(e);s&&s.length>0&&t.push({text:s});return t}(m.text||"",[],0)));function f({text:a}={}){return a&&m.data[a]?m.data[a]:a}return(a,t)=>{const x=o("v-uni-text"),g=o("v-uni-view");return e(),s(g,{class:"vir-text-list"},{default:n((()=>[(e(!0),l(r,null,i(u(p),((a,t)=>(e(),l(r,{key:t},[a.click?(e(),s(x,{key:1,class:"txt2",onClick:t=>function(a={}){v("click",[a,m.data])}(a)},{default:n((()=>[c(d(f(a)),1)])),_:2},1032,["onClick"])):(e(),s(x,{key:0,class:"txt1"},{default:n((()=>[c(d(a.text),1)])),_:2},1024))],64)))),128))])),_:1})}}}),[["__scopeId","data-v-86886ec8"]]),M=a({name:"VirTextMessage"}),V=a({...M,props:{item:null},setup(a){const n=a,l=t((()=>{var a;return null==(a=n.item)?void 0:a.abstr})),i=t((()=>{var a;return m(null==(a=n.item)?void 0:a.param)})),r=t((()=>{var a;return(null==(a=i.value)?void 0:a.type)||""})),o=t((()=>{var a;return(null==(a=i.value)?void 0:a.data)||{}}));function c([a,t]=[]){"yysp"===r.value&&(null==t?void 0:t.id)&&p("/pages/approval/view",t),"yjfk"===r.value&&(null==t?void 0:t.id)&&p("/pages/feedback/view",t)}return(a,t)=>(e(),s(D,{text:u(l),data:u(o),onClick:c},null,8,["text","data"]))}}),q=a({name:"MessageIndex"}),B=v(a({...q,setup(a){const t=f(new T(1,15)),{$param:u}=I();function v({createTime:a}={}){return w(a).fromNow()}function m(a,e={}){t.ready(a,(()=>t.load(a,e,(a=>_("/manage/platform/message/list.json?type=200,300,400&state=1",a).finally((()=>{y()}))))))}return x((()=>m(!0,u.value))),g((()=>m(!1,u.value))),k((()=>m(!0,u.value))),(a,u)=>{const m=o("v-uni-text"),p=o("v-uni-view"),f=o("vir-page");return e(),s(f,{class:"vir-message-index-page"},{default:n((()=>[(e(!0),l(r,null,i(t.pageData,((a,t)=>(e(),s(p,{key:t,class:"vir-message-item",onClick:t=>function({id:a}={}){return b.openLoading((()=>j("/manage/platform/message/update.json",{id:a,state:2}).then((a=>C({})))))}(a)},{default:n((()=>[h(p,{class:"vir-message-header"},{default:n((()=>[h(m,{class:"txt1"},{default:n((()=>[c(d(a.title),1)])),_:2},1024),h(m,{class:"txt2"},{default:n((()=>[c(d(v(a)),1)])),_:2},1024)])),_:2},1024),h(V,{item:a},null,8,["item"])])),_:2},1032,["onClick"])))),128))])),_:1})}}}),[["__scopeId","data-v-c6b37c85"]]);export{B as default};
