import{d as a,b as e,I as s,r as l,n as i,J as t,A as c,E as r,c as n,e as u,w as d,f as o,B as v,K as f,L as h,h as p,v as g,C as _,D as m,F as k,i as y,l as C,q as b,_ as x}from"./index.cc005d8f.js";import{u as w}from"./mixin.0bfe0b1d.js";import{P as j}from"./page.2a11d509.js";const z=a({name:"SearchIndex"}),I=x(a({...z,setup(a){const x=e(new j(1,15)),{goBack:z}=w(),I=s(),V=l(""),B=i((()=>I.history||[])),D=i((()=>`搜索结果${x.total}个:`));function $(a={}){q(!0,V.value)}function q(a,e=""){x.ready(a,(()=>x.load(a,{title:e},(a=>I.submit(a).finally((()=>{r()}))))))}return t((()=>q(!1,V.value))),c((()=>q(!0,V.value))),(a,e)=>{const s=C("vir-icons"),l=C("v-uni-view"),i=C("v-uni-input"),t=C("v-uni-text"),c=C("v-uni-button"),r=C("vir-page");return n(),u(r,{class:"vir-search-index-page",header:90},{header:d((()=>[o(l,{class:"vir-header"},{default:d((()=>[o(l,{class:"vir-header-btn left",onClick:v(z)},{default:d((()=>[o(s,{icon:"static/img/back.svg"})])),_:1},8,["onClick"]),o(l,{class:"vir-header-body"},{default:d((()=>[o(s,{icon:"static/img/search/search.svg"}),o(i,{"confirm-type":"search",placeholder:"请输入关键词",modelValue:V.value,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value=a),onConfirm:$},null,8,["modelValue"]),f(o(s,{icon:"static/img/close.svg",onClick:e[1]||(e[1]=a=>V.value="")},null,512),[[h,V.value]])])),_:1}),o(l,{class:"vir-header-btn right",onClick:v(z)},{default:d((()=>[o(t,{class:"vir-header-btn-txt"},{default:d((()=>[p("取消")])),_:1})])),_:1},8,["onClick"])])),_:1})])),default:d((()=>[x.total?(n(),u(l,{key:0,class:"vir-search-list"},{default:d((()=>[o(t,{class:"vir-search-list-title"},{default:d((()=>[p(g(v(D)),1)])),_:1}),(n(!0),_(k,null,m(x.pageData,((a,e)=>(n(),u(l,{key:e,class:"vir-search-list-item",onClick:e=>function({type:a,uuid:e}={}){"1"===a&&b("/pages/flzc/view",{id:e}),"2"===a&&b("/pages/zgjx/view",{id:e}),"4"===a&&b("/pages/wjts/view",{id:e}),"5"===a&&b("/pages/wdxx/view",{id:e}),"3"===a&&b("/pages/zgts/reply",{id:e})}(a)},{default:d((()=>[o(t,null,{default:d((()=>[p(g(a.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):(n(),_(k,{key:1},[y(" 历史搜索记录 "),o(l,{class:"vir-search-history"},{default:d((()=>[o(l,{class:"vir-search-history-header"},{default:d((()=>[o(t,{class:"title"},{default:d((()=>[p("历史搜索")])),_:1}),o(c,{class:"clean",onClick:e[2]||(e[2]=a=>v(I).$reset())},{default:d((()=>[p("清空")])),_:1})])),_:1}),o(l,{class:"vir-search-history-list"},{default:d((()=>[(n(!0),_(k,null,m(v(B),((a,e)=>(n(),u(t,{key:e,onClick:e=>function(a){$(V.value=a)}(a)},{default:d((()=>[p(g(a),1)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1})],2112))])),_:1})}}}),[["__scopeId","data-v-41e7a851"]]);export{I as default};
