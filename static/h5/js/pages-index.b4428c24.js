import{d as a,u as e,a as s,r as t,b as n,o as u,g as o,c as l,e as i,w as r,f as d,h as m,i as c,j as p,m as f,k as g,s as h,l as v,_ as w}from"./index.cc005d8f.js";import{c as b}from"./login.a0545c0b.js";const _=a({name:"Index"}),y=w(a({..._,setup(a){const w=e(),_=s(),y=t(!0),V=t(n({username:String(""),password:String("")}));function x({username:a,password:e}={}){return b(a,e).then((()=>{const s=p(a+":"+Date.now()),t=p(e+":"+Date.now());return f.openLoading((()=>w.login({u:s,p:t}).then((s=>{g("/pages/home/home").finally((()=>(h("un",a),h("pd",e),_.startGetPush())))}))))}))}return u(((a={})=>{if("default"===plus.runtime.launcher){const a=JSON.parse(plus.runtime.arguments);if(a&&a.identityNum)return function(a=""){return w.oauth({u:a}).then((a=>{g("/pages/home/home").finally((()=>_.startGetPush()))})).catch((a=>{y.value=!1}))}(a.identityNum)}const e={username:o("un"),password:o("pd")};if(e.username&&e.password)return x(e).catch((a=>{y.value=!1}));_.stopGetPush(),y.value=!1})),(a,e)=>{const s=v("v-uni-image"),t=v("v-uni-view"),n=v("v-uni-input"),u=v("v-uni-button"),o=v("v-uni-form");return l(),i(t,{class:"vir-index-page"},{default:r((()=>[d(t,{class:"logo"},{default:r((()=>[d(s,{src:"/static/img/login/logo.png",mode:"widthFix"})])),_:1}),y.value?c("v-if",!0):(l(),i(o,{key:0,class:"body",onSubmit:e[2]||(e[2]=a=>(a.detail,x(V.value)))},{default:r((()=>[d(t,{class:"form-item"},{default:r((()=>[d(s,{src:"/static/img/login/icon-usr.png",mode:"aspectFit"}),d(n,{class:"uni-input",modelValue:V.value.username,"onUpdate:modelValue":e[0]||(e[0]=a=>V.value.username=a),placeholder:"用户名"},null,8,["modelValue"])])),_:1}),d(t,{class:"form-item"},{default:r((()=>[d(s,{src:"/static/img/login/icon-pwd.png",mode:"aspectFit"}),d(n,{class:"uni-input",modelValue:V.value.password,"onUpdate:modelValue":e[1]||(e[1]=a=>V.value.password=a),placeholder:"密码",password:""},null,8,["modelValue"])])),_:1}),d(u,{class:"btn","form-type":"submit"},{default:r((()=>[m("立即登录")])),_:1})])),_:1}))])),_:1})}}}),[["__scopeId","data-v-400db5b2"]]);export{y as default};
