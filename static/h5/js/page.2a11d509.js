var t=Object.defineProperty,e=(e,a,i)=>(((e,a,i)=>{a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[a]=i})(e,"symbol"!=typeof a?a+"":a,i),i);import{m as a}from"./index.cc005d8f.js";class i{constructor(t,a){e(this,"initPageSize",10),e(this,"initPageNum",1),e(this,"_pageFirst",!1),e(this,"_pageLast",!1),e(this,"_pageData",[]),e(this,"_pageSize",10),e(this,"_pageNum",1),e(this,"_total",0),this.initPageSize=null!=a?a:this._pageSize,this.initPageNum=null!=t?t:this._pageNum}get pageFirst(){return this._pageFirst}get pageLast(){return this._pageLast}get pageData(){return this._pageData}get pageSize(){return this._pageSize}get pageNum(){return this._pageNum}get total(){return this._total}ready(t,e){!t&&this.pageLast||a.openLoading(e,"加载数据...")}load(t,e={},a){if(!t&&this.pageLast)return Promise.reject("已经是最后一页");const i=t?this.initPageSize:this.pageSize;return a({...e,page:t?this.initPageNum:this.pageNum+1,limit:i}).then((e=>this.pushData(e.data,t)))}pushData(t,e){this._pageData=this._set(t.list||[],e),this._pageSize=t.pageSize||10,this._pageNum=t.pageNum||1,this._pageFirst=t.firstPage,this._pageLast=t.lastPage,this._total=t.total}_push(t,e){return Array.prototype.push.apply(t,e)}_set(t,e){return e?t:this._pageData.concat(t)}}export{i as P};
