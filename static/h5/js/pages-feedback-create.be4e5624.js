import{d as e,c as a,e as l,w as u,f as n,h as t,v as i,l as o,_ as v,r,y as c,b as s,Q as p,q as d,m,R as f,S as h,G as g}from"./index.cc005d8f.js";import{O as b}from"./index.8c9a6929.js";import{V as y}from"./vir-form-item.a1ccdef8.js";const _=e({name:"VirCheckboxOnly"}),x=v(e({..._,props:{placeholder:null,value:null},emits:["update:value","change"],setup(e,{emit:v}){function r({detail:e}={}){var a,l;l=(null==(a=e.value)?void 0:a.length)>0,v("update:value",l),v("change",l)}return(v,c)=>{const s=o("v-uni-checkbox"),p=o("v-uni-text"),d=o("v-uni-label"),m=o("v-uni-checkbox-group");return a(),l(m,{class:"vir-checkbox-only",onChange:r},{default:u((()=>[n(d,{class:"vir-checkbox-only-label"},{default:u((()=>[n(s,{checked:e.value},null,8,["checked"]),n(p,null,{default:u((()=>[t(i(e.placeholder),1)])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-8031b9c0"]]),k=e({name:"VirOpinionTypeSelect"}),V=e({...k,props:{value:null,name:null},emits:["update:value","update:name","change"],setup(e,{emit:n}){const v=e,s=r(-1),p=r([]),d=r([]);function m(e={}){var a;!function(e=-1){var a,l,u;n("change",null!=(a=d.value[e])?a:""),n("update:name",null!=(l=p.value[e])?l:""),n("update:value",null!=(u=d.value[e])?u:"")}(s.value=null==(a=e.detail)?void 0:a.value)}return c((()=>String(v.value)),(e=>{s.value=d.value.indexOf(e)}),{immediate:!0}),b().then(((e=[])=>{d.value=e.map((e=>String(e.DKey))),p.value=e.map((e=>String(e.DValue)))})),(e,n)=>{const v=o("v-uni-text"),r=o("v-uni-picker");return a(),l(r,{class:"uni-input uni-input-wrapper",value:s.value,onChange:m,range:p.value},{default:u((()=>[s.value>=0?(a(),l(v,{key:0,class:"input-context uni-input-input"},{default:u((()=>[t(i(p.value[s.value]),1)])),_:1})):(a(),l(v,{key:1,class:"input-placeholder"},{default:u((()=>[t("请选择意见类型")])),_:1}))])),_:1},8,["value","range"])}}}),S=e({name:"FeedbackCreate"}),T=v(e({...S,setup(e){const i=r(s({opinionType:"0",anonymous:!0,content:""}));function v(e={}){return i.value&&"0"!=i.value.opinionType?i.value&&""!=i.value.content.replace(/\s+/g,"")?m.openLoading((()=>f("/manage/specialopinion/create.json",i.value).then((e=>h("提交成功").then((e=>g())))))):m.failure("意见内容不可为空"):m.failure("意见类型不可为空")}return p((()=>{d("/pages/feedback/index")})),(e,r)=>{const c=o("v-uni-textarea"),s=o("v-uni-button"),p=o("v-uni-view"),d=o("v-uni-form"),m=o("vir-page");return a(),l(m,{class:"vir-feedback-create-page"},{default:u((()=>[n(d,{class:"vir-feedback-create-form",onSubmit:v},{default:u((()=>[n(y,{label:"意见类型",type:"navigation",required:!0},{default:u((()=>[n(V,{value:i.value.opinionType,"onUpdate:value":r[0]||(r[0]=e=>i.value.opinionType=e)},null,8,["value"])])),_:1}),n(y,{label:"意见内容",type:"vertical",required:!0},{default:u((()=>[n(c,{class:"uni-input",modelValue:i.value.content,"onUpdate:modelValue":r[1]||(r[1]=e=>i.value.content=e),placeholder:"可输入500字以内的意见内容",maxlength:"500"},null,8,["modelValue"])])),_:1}),n(x,{value:i.value.anonymous,"onUpdate:value":r[2]||(r[2]=e=>i.value.anonymous=e),placeholder:"匿名反馈"},null,8,["value"]),n(p,{class:"vir-form-btn-group blue"},{default:u((()=>[n(s,{"form-type":"submit"},{default:u((()=>[t("确认")])),_:1})])),_:1})])),_:1})])),_:1})}}}),[["__scopeId","data-v-8fd76b30"]]);export{T as default};
