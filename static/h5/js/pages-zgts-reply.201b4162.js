import{d as e,n,c as t,e as l,B as a,l as s,r as u,o as i,m as o,t as r,w as c,f as d,C as v,D as f,F as p,i as m,h as x,R as g,v as _,q as h,_ as y}from"./index.cc005d8f.js";import{V as w,a as C,b}from"./vir-view-text.2b60cb2c.js";import{V as k}from"./vir-panel.7f40cc34.js";import{p as q}from"./preview.9bab3b13.js";const z=e({name:"VirIconsFile"}),V=e({...z,props:{fname:null,size:null},setup(e){const u=e,i=n((()=>{const e=function(e=""){return["pdf"].includes(e)?"pdf":["ppt","pptx"].includes(e)?"ppt":["doc","docx"].includes(e)?"word":["xls","xlsx"].includes(e)?"execl":"unknown"}(function(e=""){const n=/.*\.(\w+)$/.exec(e);if(n&&n.length>=2)return n[1];return""}(u.fname));return function(e=""){return`static/img/files/${e}.svg`}(e)}));return(n,u)=>{const o=s("vir-icons");return t(),l(o,{icon:a(i),size:e.size},null,8,["icon","size"])}}}),j=e({name:"ZgtsReply"}),I=y(e({...j,setup(e){const n=u([]),a=u([]),y=u({});function z(e={}){const t=n.value.map((e=>({replyContent:e.replyContent,questionId:e.uuid})));return o.openLoading((()=>g("/manage/pushcontent/reply/replyPushContent.json",{replys:t}).then((e=>o.success("提交成功")))))}return i((({id:e}={})=>o.openLoading((()=>r("/manage/pushcontent/search/preview.json",{id:e}).then((e=>{n.value=function({question:e}={}){return e&&e.length?e.map((e=>({replyContent:"",...e}))):[]}(e.data),a.value=function({fileInfo:e}={}){return e||[]}(e.data),y.value=function({content:e}={}){return e||{}}(e.data)})))))),(e,u)=>{const i=s("v-uni-text"),o=s("v-uni-view"),r=s("v-uni-textarea"),g=s("v-uni-button"),j=s("vir-page");return t(),l(j,{class:"vir-zgts-reply-page"},{default:c((()=>{var e,s;return[d(C,{title:null==(e=y.value)?void 0:e.title},{default:c((()=>{var e,n;return[d(w,{label:"浏览人数",context:null==(e=y.value)?void 0:e.visitCount},null,8,["context"]),d(w,{label:"发布时间",context:null==(n=y.value)?void 0:n.pushTime},null,8,["context"])]})),_:1},8,["title"]),d(b,{content:null==(s=y.value)?void 0:s.content,more:!0},null,8,["content"]),a.value&&a.value.length?(t(),l(k,{key:0,title:"相关附件"},{default:c((()=>[(t(!0),v(p,null,f(a.value,((e,n)=>(t(),l(o,{key:n,class:"vir-view-files-item",onClick:n=>function(e){return q(e)}(e)},{default:c((()=>[d(V,{fname:e.fileName,size:50},null,8,["fname"]),d(i,{class:"vir-view-files-name"},{default:c((()=>[x(_(e.fileName),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})):m("v-if",!0),n.value&&n.value.length?(t(),l(k,{key:1,title:"信息回复"},{default:c((()=>[(t(!0),v(p,null,f(n.value,((e,n)=>(t(),l(o,{class:"vir-view-question-item",key:n},{default:c((()=>[d(o,{class:"vir-view-question-head",onClick:n=>function(e){return h("/pages/zgts/view",{id:e.uuid})}(e)},{default:c((()=>[d(i,{class:"idx"},{default:c((()=>[x(_(n+1)+"、",1)])),_:2},1024),d(i,{class:"txt"},{default:c((()=>[x(_(e.questionDesc),1)])),_:2},1024),d(i,{class:"req"},{default:c((()=>[x("(点击看回复列表)")])),_:1}),e.required?(t(),l(i,{key:0,class:"req"},{default:c((()=>[x("(必填)")])),_:1})):m("v-if",!0)])),_:2},1032,["onClick"]),d(r,{modelValue:e.replyContent,"onUpdate:modelValue":n=>e.replyContent=n,placeholder:"可输入500字以内的回复内容",maxlength:"500"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1024)))),128)),d(o,{class:"vir-form-btn-group blue"},{default:c((()=>[d(g,{onClick:z},{default:c((()=>[x("提交")])),_:1})])),_:1})])),_:1})):m("v-if",!0)]})),_:1})}}}),[["__scopeId","data-v-35632c1b"]]);export{I as default};
